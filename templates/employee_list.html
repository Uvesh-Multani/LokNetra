{% extends 'base.html' %}
{% block title %}Employee List | LokNetra{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="mb-0">Employee List</h2>
  <a href="{% url 'register_employee' %}" class="btn btn-success"><i class="fas fa-user-plus me-1"></i> Add Employee</a>
</div>
<div class="mb-3">
  <input type="text" class="form-control" id="employeeSearch" placeholder="Search employees...">
</div>
<div class="table-responsive">
  <table class="table table-striped table-hover align-middle" id="employeeTable">
    <thead class="table-primary">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Photo</th>
        <th scope="col">Name</th>
        <th scope="col">Employee ID</th>
        <th scope="col">Department</th>
        <th scope="col">Email</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for emp in employees %}
      <tr>
        <th scope="row">{{ forloop.counter }}</th>
        <td><img src="{{ emp.photo_url }}" alt="Photo" class="rounded-circle" style="height:40px;width:40px;object-fit:cover;"></td>
        <td>{{ emp.name }}</td>
        <td><span class="badge bg-secondary">{{ emp.employee_id }}</span></td>
        <td>{{ emp.department }}</td>
        <td>{{ emp.email }}</td>
        <td>
          <div class="btn-group" role="group">
            <a href="{% url 'emp-detail' emp.id %}" class="btn btn-sm btn-info" title="View Details"><i class="fas fa-eye"></i></a>
            <a href="{% url 'emp-authorize' emp.id %}" class="btn btn-sm btn-warning" title="Authorize Employee"><i class="fas fa-key"></i></a>
            <a href="{% url 'emp-delete' emp.id %}" class="btn btn-sm btn-danger" title="Delete Employee"><i class="fas fa-trash-alt"></i></a>
          </div>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="7" class="text-center text-muted">No employees found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
{% block extra_scripts %}
<script>
  document.getElementById('employeeSearch').addEventListener('keyup', function() {
    var value = this.value.toLowerCase();
    var rows = document.querySelectorAll('#employeeTable tbody tr');
    rows.forEach(function(row) {
      var text = row.textContent.toLowerCase();
      row.style.display = text.includes(value) ? '' : 'none';
    });
  });
</script>
{% endblock %}
